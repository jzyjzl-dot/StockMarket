<template>
  <div class="nt-page">
    <div class="nt-top">
      <!-- Ë°åÊÉÖ -->
      <section class="pane pane-market">
        <header class="pane-header"><div class="title">Ë°åÊÉÖ</div></header>
        <div class="pane-body scroll-y">
          <div class="market-head">
            <div class="stock">
              <div class="name">{{ currentStock.name }}</div>
              <div class="code">{{ currentStock.code }}</div>
            </div>
            <div class="price-box">
              <div class="price">{{ currentStock.price.toFixed(2) }}</div>
              <div class="delta" :class="{ up: currentStock.change >= 0, down: currentStock.change < 0 }">
                <span>{{ currentStock.change >= 0 ? '+' : '' }}{{ currentStock.change.toFixed(2) }}</span>
                <span>({{ (currentStock.changePct * 100).toFixed(2) }}%)</span>
              </div>
            </div>
          </div>
          <div class="market-table">
            <table>
              <tbody>
                <tr v-for="(row, idx) in marketRows" :key="'ask-' + idx">
                  <td class="side sell">Âçñ{{ 10 - idx }}</td>
                  <td class="price sell">{{ row.ask.price.toFixed(2) }}</td>
                  <td class="vol">{{ row.ask.vol }}</td>
                </tr>
                <tr class="sep"><td colspan="3"></td></tr>
                <tr v-for="(row, idx) in marketRows" :key="'bid-' + idx">
                  <td class="side buy">‰π∞{{ idx + 1 }}</td>
                  <td class="price buy">{{ row.bid.price.toFixed(2) }}</td>
                  <td class="vol">{{ row.bid.vol }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="preview-summary">
          <span>ÂêàËÆ°</span>
          <span class="mono">{{ totalPrice.toFixed(2) }}</span>
          <span class="mono">{{ totalAvailable.toFixed(2) }}</span>
          <span class="mono">0</span>
        </div>
      </section>

      <!-- ‰∏ãÂçïÔºàÂ§öË¥¶Âè∑Ôº?-->
      <section class="pane pane-order">
        <header class="pane-header"><div class="title">ÁÆóÊ≥ï‰∫§Êòì</div></header>
        <div class="order-form pane-body scroll-y">
          <!-- Êñ∞ÁâàÔºöÁÆóÊ≥ï‰∫§Êò?+ ÂèÇÊï∞ËÆæÁΩÆÔºà‰∏§‰∏™Áã¨Á´ãË°®Ê†ºÔºåÂêÑËá™ÊªöÂä®Ôº?-->
          <div class="algo-order-grid">
            <!-- ÁÆóÊ≥ï‰∫§ÊòìË°®Ê†º -->
            <div class="algo-col">
              <div class="algo-table-wrapper">
                <h3 class="table-title">ÁÆóÊ≥ï‰∫§Êòì</h3>
                <div class="table-content scroll-y-independent">
                  <el-form :model="orderForm" label-width="96px" size="small">
                    <el-form-item label="ÂßîÊâòË¥¶Êà∑">
                      <el-select v-model="orderForm.account" style="width: 100%">
                        <el-option label="ÂÖ®ÈÉ®Ë¥¶Êà∑" value="ALL" />
                        <el-option v-for="acc in accounts" :key="acc.id" :label="acc.name" :value="acc.id" />
                      </el-select>
                    </el-form-item>
                    <el-form-item label="ËØÅÂà∏‰ª£Á†Å">
                      <el-input v-model="orderForm.symbol" placeholder="Â¶?600000">
                        <template #append>{{ currentStock.name }}</template>
                      </el-input>
                    </el-form-item>
                    <el-form-item label="ÁÆóÊ≥ïÁ±ªÂûã">
                      <el-select v-model="orderForm.algoType" style="width: 100%">
                        <el-option label="TWAP" value="TWAP" />
                        <el-option label="VWAP" value="VWAP" />
                      </el-select>
                    </el-form-item>
                    <el-form-item label="ÁÆóÊ≥ïÂÆû‰æã">
                      <el-input v-model="orderForm.algoInstance" placeholder="Â¶?kf_twap_plus" />
                    </el-form-item>
                    <el-form-item label="ÂßîÊâòÊó∂Èó¥">
                      <div class="time-row">
                        <el-time-select v-model="orderForm.startTime" :start="'09:30'" :end="'14:57'" :step="'00:01'" placeholder="ÂºÄÂß? />
                        <el-time-select v-model="orderForm.endTime" :start="'09:30'" :end="'15:00'" :step="'00:01'" placeholder="ÁªìÊùü" />
                      </div>
                    </el-form-item>
                    <el-form-item label="‰∫§ÊòìÊñπÂêë">
                      <el-select v-model="orderForm.entrustType" style="width: 100%">
                        <el-option label="ÊôÆÈÄö‰π∞ÂÖ? value="BUY" />
                        <el-option label="ÊôÆÈÄöÂçñÂá? value="SELL" />
                      </el-select>
                    </el-form-item>
                    <el-form-item label="‰ª∑Ê†ºÁ±ªÂûã">
                      <el-select v-model="orderForm.priceType" style="width: 100%">
                        <el-option label="Èôê‰ª∑" value="fixed" />
                        <el-option label="ÂØπÊâã‰ª? value="counter" />
                        <el-option label="ÊéíÈòü‰ª? value="queue" />
                      </el-select>
                    </el-form-item>
                    <el-form-item label="ÂßîÊâò‰ª∑Ê†º">
                      <el-input-number v-model="orderForm.price" :precision="2" :step="0.01" :min="0" controls-position="right" style="width: 100%" />
                    </el-form-item>
                    <el-form-item label="ÂßîÊâòÁ≠ñÁï•">
                      <el-select v-model="orderForm.strategy" style="width: 100%">
                        <el-option label="Âõ∫ÂÆöÊï∞Èáè" value="fixedQty" />
                        <el-option label="Âõ∫ÂÆöÈáëÈ¢ù" value="fixedAmt" />
                        <el-option label="ÁôæÂàÜÊØ? value="percentage" />
                      </el-select>
                    </el-form-item>
                    <el-form-item label="‰ªªÂä°Êï∞Èáè">
                      <div class="qty-row">
                        <el-input-number v-model="orderForm.qty" :min="0" :step="100" style="flex:1" />
                        <span>ËÇ?/span>
                      </div>
                    </el-form-item>
                    <el-form-item label="ÂàÜÈÖçÊñπÂºè">
                      <el-select v-model="orderForm.distribution" style="width: 100%">
                        <el-option label="ÊØèË¥¶Êà∑Âõ∫ÂÆöÊï∞Èá? value="eachFixedQty" />
                        <el-option label="ÊåâË¥¶Êà∑ÂèØÁî®ËµÑÈáëÊØî‰æ? value="byProportion" />
                      </el-select>
                    </el-form-item>
                    <el-form-item>
                      <el-button type="danger" style="width: 100%" @click="placeOrder">{{ orderForm.entrustType === 'BUY' ? '‰π∞ÂÖ•' : 'ÂçñÂá∫' }}</el-button>
                    </el-form-item>
                  </el-form>
                </div>
              </div>
            </div>

            <!-- ÁÆóÊ≥ïÂèÇÊï∞ËÆæÁΩÆË°®Ê†º -->
            <div class="algo-col">
              <div class="algo-table-wrapper">
                <h3 class="table-title">ÁÆóÊ≥ïÂèÇÊï∞ËÆæÁΩÆ</h3>
                <div class="table-content scroll-y-independent">
                  <el-form :model="algoParams" label-width="96px" size="small">
                    <el-form-item label="ÁõíÂ≠êÁºñÂè∑">
                      <el-input v-model="algoParams.boxNo" placeholder="ËØ∑ËæìÂÖ? />
                    </el-form-item>
                    <el-form-item label="Â§ñÈÉ®ÁºñÂè∑">
                      <el-input v-model="algoParams.externalNo" placeholder="ËØ∑ËæìÂÖ? />
                    </el-form-item>
                    <el-form-item label="ÊØçÂçïÈôê‰ª∑">
                      <el-input-number v-model="algoParams.parentLimitPrice" :min="0" :step="0.01" controls-position="right" style="width:100%" />
                    </el-form-item>
                    <el-form-item label="Ê∂®ÂπÖÈôêÂà∂(%)">
                      <el-input-number v-model="algoParams.riseLimitPct" :min="0" :step="0.1" style="width:100%" />
                    </el-form-item>
                    <el-form-item label="Ë∑åÂπÖÈôêÂà∂(%)">
                      <el-input-number v-model="algoParams.fallLimitPct" :min="0" :step="0.1" style="width:100%" />
                    </el-form-item>
                    <el-form-item label="ÊªëÁÇπÂü∫ÁÇπ">
                      <el-input-number v-model="algoParams.slippageBps" :min="0" :step="1" style="width:100%" />
                    </el-form-item>
                    <el-form-item label="Ê∂®Ë∑åÂÅúËÆæÁΩ?>
                      <el-select v-model="algoParams.limitRule" style="width: 100%">
                        <el-option label="Ê∂®ÂÅú‰∏çÂçñË∑åÂÅú‰∏ç‰π∞" value="strict" />
                        <el-option label="‰∏çÈôêÂà? value="none" />
                      </el-select>
                    </el-form-item>
                    <el-form-item label="ÁõòÂè£ÈôêÂà∂(ÂÖ?">
                      <el-input-number v-model="algoParams.orderbookLimit" :min="0" :step="0.01" style="width:100%" />
                    </el-form-item>
                    <el-form-item>
                      <el-checkbox v-model="algoParams.execAfterExpire">ËøáÊúüÂêéÊâßË°?/el-checkbox>
                    </el-form-item>
                    <el-form-item>
                      <el-checkbox v-model="algoParams.executeImmediately">Á´ãÂç≥‰∫§Êòì</el-checkbox>
                    </el-form-item>
                  </el-form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ÁÆóÊ≥ïÂèÇÊï∞ËÆæÁΩÆÔºàÁã¨Á´?SectionÔº?-->
      <section class="pane pane-params">
        <header class="pane-header"><div class="title">ÁÆóÊ≥ïÂèÇÊï∞ËÆæÁΩÆ</div></header>
        <div class="pane-body scroll-y">
          <el-form :model="algoParams" label-width="96px" size="small">
            <el-form-item label="ÁõíÂ≠êÁºñÂè∑">
              <el-input v-model="algoParams.boxNo" placeholder="ËØ∑ËæìÂÖ? />
            </el-form-item>
            <el-form-item label="Â§ñÈÉ®ÁºñÂè∑">
              <el-input v-model="algoParams.externalNo" placeholder="ËØ∑ËæìÂÖ? />
            </el-form-item>
            <el-form-item label="ÊØçÂçïÈôê‰ª∑">
              <el-input-number v-model="algoParams.parentLimitPrice" :min="0" :step="0.01" controls-position="right" style="width:100%" />
            </el-form-item>
            <el-form-item label="Ê∂®ÂπÖÈôêÂà∂(%)">
              <el-input-number v-model="algoParams.riseLimitPct" :min="0" :step="0.1" style="width:100%" />
            </el-form-item>
            <el-form-item label="Ë∑åÂπÖÈôêÂà∂(%)">
              <el-input-number v-model="algoParams.fallLimitPct" :min="0" :step="0.1" style="width:100%" />
            </el-form-item>
            <el-form-item label="ÊªëÁÇπÂü∫ÁÇπ">
              <el-input-number v-model="algoParams.slippageBps" :min="0" :step="1" style="width:100%" />
            </el-form-item>
            <el-form-item label="Ê∂®Ë∑åÂÅúËÆæÁΩ?>
              <el-select v-model="algoParams.limitRule" style="width: 100%">
                <el-option label="Ê∂®ÂÅú‰∏çÂçñË∑åÂÅú‰∏ç‰π∞" value="strict" />
                <el-option label="‰∏çÈôêÂà? value="none" />
              </el-select>
            </el-form-item>
            <el-form-item label="ÁõòÂè£ÈôêÂà∂(ÂÖ?">
              <el-input-number v-model="algoParams.orderbookLimit" :min="0" :step="0.01" style="width:100%" />
            </el-form-item>
            <el-form-item>
              <el-checkbox v-model="algoParams.execAfterExpire">ËøáÊúüÂêéÊâßË°?/el-checkbox>
            </el-form-item>
            <el-form-item>
              <el-checkbox v-model="algoParams.executeImmediately">Á´ãÂç≥‰∫§Êòì</el-checkbox>
            </el-form-item>
          </el-form>
        </div>
      </section>

      <!-- È¢ÑËßàÔºàÂ§öË¥¶Âè∑ÈÄêË°åÔº?-->
      <section class="pane pane-preview">
        <header class="pane-header">
          <div class="title">È¢ÑËßà</div>
          <div class="sub">Ë¥¶Êà∑Êï∞Ôºö{{ selectedAccounts.length }}  ÂßîÊâòÁ¨îÊï∞Ôºö{{ previewRows.length }}</div>
        </header>
        <div class="pane-body">
          <div class="scroll-x">
            <el-table v-resizable-columns :data="previewRows" size="small" style="width: 100%">
              <el-table-column type="selection" width="44" />
              <el-table-column prop="account" label="Ë¥¶Êà∑" width="120" />
              <el-table-column prop="symbol" label="ËØÅÂà∏‰ª£Á†Å" width="120" />
              <el-table-column prop="side" label="ÊñπÂêë" width="90" />
              <el-table-column prop="qty" label="ÂßîÊâòÈá? width="100" />
              <el-table-column prop="price" label="ÂßîÊâò‰ª? width="100" />
              <el-table-column prop="amount" label="ÂßîÊâòÈáëÈ¢ù" min-width="140" />
              <el-table-column prop="available" label="ÂèØÁî®ËµÑÈáë" min-width="140" />
              <el-table-column prop="buyable" label="ÂèØ‰π∞Êï∞Èáè" min-width="100" />
            </el-table>
          </div>
        </div>
      </section>
    </div>

    <!-- Êü•ËØ¢ -->
    <section class="pane pane-query">
      <header class="pane-header"><div class="title">Êü•ËØ¢</div></header>
      <div class="pane-body">
        <el-tabs v-model="activeTab" type="card" class="nt-tabs">
          <el-tab-pane label="ËµÑÈáë" name="fund">
            <div class="scroll-x">
              <el-table v-resizable-columns :data="fundRows" size="small" style="width: 100%" height="260">
                <el-table-column prop="available" label="ÂèØÁî®ËµÑÈáë" width="140" />
                <el-table-column prop="frozen" label="ÂÜªÁªìËµÑÈáë" width="140" />
                <el-table-column prop="marketValue" label="Â∏ÇÂÄ? width="140" />
                <el-table-column prop="totalAssets" label="ÊÄªËµÑ‰∫? width="160" />
              </el-table>
            </div>
          </el-tab-pane>
          <el-tab-pane label="ÊåÅ‰ªì" name="pos">
            <div class="scroll-x">
              <el-table v-resizable-columns :data="positionRows" size="small" style="width: 100%" height="260">
                <el-table-column prop="symbol" label="ËØÅÂà∏‰ª£Á†Å" width="120" />
                <el-table-column prop="name" label="ËØÅÂà∏ÂêçÁß∞" width="140" />
                <el-table-column prop="quantity" label="ÊåÅ‰ªìÊï∞Èáè" width="100" />
                <el-table-column prop="cost" label="ÊåÅ‰ªìÊàêÊú¨" width="100" />
                <el-table-column prop="marketPrice" label="Áé∞‰ª∑" width="100" />
                <el-table-column prop="marketValue" label="Â∏ÇÂÄ? min-width="140" />
              </el-table>
            </div>
          </el-tab-pane>
          <el-tab-pane label="ÂßîÊâò" name="order">
            <div class="scroll-x">
              <el-table v-resizable-columns :data="orderRows" size="small" style="width: 100%" height="260">
                <el-table-column prop="account" label="Ë¥¶Êà∑" width="100" />
                <el-table-column prop="time" label="ÂßîÊâòÊó∂Èó¥" width="160" />
                <el-table-column prop="stockCode" label="ËØÅÂà∏‰ª£Á†Å" width="120" />
                <el-table-column prop="type" label="ÊñπÂêë" width="80" />
                <el-table-column prop="strategy" label="ÁÆóÊ≥ï" width="120" />
                <el-table-column prop="price" label="ÂßîÊâò‰ª? width="100" />
                <el-table-column prop="quantity" label="ÂßîÊâòÈá? width="100" />
                <el-table-column prop="dealt" label="Êàê‰∫§Èá? width="100" />
                <el-table-column prop="amount" label="ÂßîÊâòÈáëÈ¢ù" min-width="140" />
                <el-table-column prop="market" label="Â∏ÇÂú∫" width="100" />
                <el-table-column prop="status" label="Áä∂ÊÄ? width="100" />
              </el-table>
            </div>
          </el-tab-pane>
          <el-tab-pane label="Êàê‰∫§" name="deal">
            <div class="scroll-x">
              <el-table v-resizable-columns :data="dealRows" size="small" style="width: 100%" height="260">
                <el-table-column prop="time" label="Êó∂Èó¥" width="160" />
                <el-table-column prop="stockCode" label="ËØÅÂà∏‰ª£Á†Å" width="120" />
                <el-table-column prop="type" label="ÊñπÂêë" width="80" />
                <el-table-column prop="price" label="Êàê‰∫§‰ª? width="100" />
                <el-table-column prop="quantity" label="Êàê‰∫§Èá? width="100" />
                <el-table-column prop="amount" label="Êàê‰∫§ÈáëÈ¢ù" min-width="140" />
                <el-table-column prop="status" label="Áä∂ÊÄ? width="100" />
              </el-table>
            </div>
          </el-tab-pane>
        </el-tabs>
      </div>
      <footer class="nt-pagination">
        <div class="left">ÂÖ?{{ orderRows.length }} Êù?/div>
        <el-pagination background layout="prev, pager, next" :total="orderRows.length" :page-size="20" />
        <div class="right">ÂΩìÂâçÊØèÈ°µÊòæÁ§∫: 20</div>
      </footer>
    </section>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import { ElMessage } from 'element-plus';

// Ë°åÊÉÖ
const currentStock = ref({ name: 'Êµ¶ÂèëÈì∂Ë°å', code: '600000', price: 7.49, change: 0.01, changePct: 0.0013 });
const marketRows = ref(Array.from({ length: 10 }).map((_, i) => ({ ask: { price: 7.60 - i * 0.01, vol: 2000 + i * 100 }, bid: { price: 7.46 - i * 0.01, vol: 1800 + i * 100 } })));

// Â§öË¥¶Âè?
const accounts = ref([
  { id: 'A01', name: 'Ë¥¶Êà∑1', available: 884760.0 },
  { id: 'A02', name: 'Ë¥¶Êà∑2', available: 707258.0 },
  { id: 'A03', name: 'Ë¥¶Êà∑3', available: 120300.0 },
]);
const selectedAccounts = ref(accounts.value.map((a) => a.id));

// ‰∏ãÂçï
const orderForm = ref({
  account: 'ALL',
  symbol: '600000',
  algoType: 'TWAP',
  algoInstance: 'kf_twap_plus',
  startTime: '09:30',
  endTime: '14:57',
  entrustType: 'BUY',
  priceType: 'fixed',
  price: 7.49,
  strategy: 'fixedQty',
  qty: 1000,
  distribution: 'eachFixedQty',
});
const setQty = (n) => (orderForm.value.qty = n);
const placeOrder = () => {
  if (!orderForm.value.symbol || !orderForm.value.qty || selectedAccounts.value.length === 0) {
    ElMessage.warning('ËØ∑ÂÆåÂñÑ‰∏ãÂçï‰ø°ÊÅØ‰∏éÈÄâÊã©Ë¥¶Êà∑');
    return;
  }
  ElMessage.success('Â§öË¥¶Âè∑Êåá‰ª§Â∑≤Êèê‰∫§');
};
// ÁÆóÊ≥ïÂèÇÊï∞ËÆæÁΩÆ
const algoParams = ref({
  boxNo: '',
  externalNo: '',
  parentLimitPrice: null,
  riseLimitPct: null,
  fallLimitPct: null,
  slippageBps: null,
  limitRule: 'strict',
  orderbookLimit: null,
  execAfterExpire: false,
  executeImmediately: true,
});

// È¢ÑËßà
const previewRows = computed(() => {
  const price = Number(orderForm.value.price) || 0;
  const qty = Number(orderForm.value.qty) || 0;
  return selectedAccounts.value.map((id) => {
    const acc = accounts.value.find((a) => a.id === id);
    const amount = price * qty;
    return {
      account: acc?.name || id,
      symbol: orderForm.value.symbol,
      side: orderForm.value.entrustType === 'BUY' ? '‰π∞ÂÖ•' : 'ÂçñÂá∫',
      qty,
      price: price ? price.toFixed(2) : '-',
      amount: amount ? amount.toFixed(2) : '-',
      available: (acc?.available ?? 0).toFixed(2),
      buyable: Math.floor(((acc?.available ?? 0) / (price || 1)) / 100) * 100,
    };
  });
});

const totalPrice = computed(() =>
  previewRows.value.reduce((sum, r) => sum + (r.amount === '-' ? 0 : Number(r.amount)), 0)
);

const totalAvailable = computed(() =>
  selectedAccounts.value.reduce((sum, id) => {
    const acc = accounts.value.find((a) => a.id === id);
    return sum + (acc?.available ?? 0);
  }, 0)
);

// Êü•ËØ¢
const activeTab = ref('order');
const fundRows = computed(() => accounts.value.map((a) => ({ available: a.available.toFixed(2), frozen: (0).toFixed(2), marketValue: (0).toFixed(2), totalAssets: a.available.toFixed(2) })));
const positionRows = ref([]);
const orderRows = ref([
  { account: 'Ë¥¶Êà∑1', time: '2023-08-03 11:17:35', stockCode: '600000', type: '‰π∞ÂÖ•', strategy: 'TWAP', price: 7.49, quantity: 1000, dealt: 0, amount: 7490.0, market: '‰∏ä‰∫§ÊâÄ', status: 'Â∑≤Êä•' },
]);
const dealRows = ref([]);
</script>

<style scoped>
/* ‰∏?NormalTrade ‰∏ÄËá¥ÁöÑÂ∏ÉÂ±Ä‰∏éÈ£éÊ†?*/
.scroll-x :deep(.el-table) { min-width: 900px; }

/* Ë°åÊÉÖÊ†∑Âºè */
.market-head { display: flex; align-items: flex-end; justify-content: space-between; padding: 10px; }
.market-head .name { font-size: 14px; color: #606266; }
.market-head .code { font-size: 12px; color: #909399; }
.market-head .price { font-size: 22px; font-weight: 700; color: #303133; }
.market-head .delta { font-size: 12px; }
.market-head .delta.up { color: #2ecb70; }
.market-head .delta.down { color: #ff6b6b; }
.market-table { padding: 0 10px 10px; }
.market-table table { width: 100%; border-collapse: collapse; }
.market-table td { padding: 6px 4px; font-size: 12px; }
.market-table .side { width: 42px; color: #8a9098; }
.market-table .price { width: 70px; font-weight: 600; }
.market-table .price.buy { color: #2ecb70; }
.market-table .price.sell { color: #ff6b6b; }
.market-table .sep td { height: 6px; border-top: 1px dashed #ebeef5; }
.market-table .vol { text-align: right; color: #606266; }

/* ‰∏ãÂçïÈù¢Êùø */
.pane-order .pane-body {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 10px; /* ÁªôÊ†ÖÊ†ºÁïô‰∏Ä‰∫õÂ§ñËæπË∑ù */
}
.quick-ops { display: flex; gap: 6px; }

/* Ê®™ÂêëÊ∫¢Âá∫Êó∂‰ΩøÁî®ÊªöÂä®Êù° */
.scroll-x :deep(.el-table) { min-width: 900px; }

/* ‰øÆÂ§çÊü•ËØ¢Èù¢ÊùøÊ†áÁ≠æÂàáÊç¢Êó∂ÁöÑÊäñÂä®ÈóÆÈ¢ò */
.pane-query .el-tabs__content {
  /* Âõ∫ÂÆöÊ†áÁ≠æÈ°µÂÜÖÂÆπÂå∫ÂüüÁöÑÊúÄÂ∞èÈ´òÂ∫¶ÔºåÈò≤Ê≠¢‰∏çÂêåÊ†áÁ≠æÈ°µÈ´òÂ∫¶‰∏ç‰∏ÄËá¥ÂØºËá¥ÊäñÂä?*/
  min-height: 300px;
}

/* Á®≥ÂÆöÊªöÂä®Êù°Â∏ÉÂ±Ä */
.scroll-x {
  /* ÂßãÁªà‰∏∫ÊªöÂä®Êù°È¢ÑÁïôÁ©∫Èó¥ÔºåÈÅøÂÖçÊªöÂä®Êù°Âá∫Áé∞/Ê∂àÂ§±Êó∂ÁöÑÂ∏ÉÂ±ÄÂèòÂåñ */
  overflow-x: auto;
  scrollbar-gutter: stable;
}

/* Êú¨È°µÔºöÂéãÁº©È¢ÑËßàÂÆΩÂ∫¶ÔºåÊâ©Â§ß‰∏ãÂçïÂå∫Âüü */
.nt-page .nt-top { grid-template-columns: 260px 420px 420px 360px; }

/* È¢ÑËßàË°®Ê†ºÂç†Êª°Ââ©‰ΩôÂÆΩÂ∫¶ */
.pane-preview .scroll-x {
  width: 100%;
}

.pane-preview .scroll-x .el-table {
  /* Á°Æ‰øùË°®Ê†ºËÉΩÂ§üÂà©Áî®ÊâÄÊúâÂèØÁî®ÂÆΩÂ∫?*/
  width: 100% !important;
  min-width: 800px; /* ËÆæÁΩÆÊúÄÂ∞èÂÆΩÂ∫¶Á°Æ‰øùË°®Ê†º‰∏ç‰ºöËøáÂ∫¶ÂéãÁº?*/
}

/* ËÆ©Êüê‰∫õÂàóËÉΩÂ§üËá™ÈÄÇÂ∫îÂÆΩÂ∫¶ */
.pane-preview .el-table .el-table__body-wrapper {
  overflow-x: auto;
}

/* ‰∏§Âàó‰∏ãÂçïÊ†ÖÊ†º */
.algo-order-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; min-width: 0; height: 100%; }
.pane-order .algo-order-grid { display: block; }
.pane-order .algo-col + .algo-col { display: none; }
.algo-col { 
  min-width: 0; 
  display: flex; 
  flex-direction: column; /* ËÆ©Ë°®Ê†ºÂåÖË£ÖÂô®ËÉΩÂ§ü‰º∏Â±ï */
}

/* Ë°®Ê†ºÊ†∑Âºè */
.algo-table-wrapper {
  background: #ffffff;
  border: 1px solid #e4e7ed;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  flex: 1; /* ËÆ©Ë°®Ê†ºÂç†Êª°ÂèØÁî®Á©∫Èó?*/
}

.table-title {
  background: #f5f7fa;
  border-bottom: 1px solid #e4e7ed;
  padding: 12px 16px;
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: #303133;
  flex-shrink: 0; /* Ê†áÈ¢ò‰∏çÊî∂Áº?*/
}

.table-content {
  padding: 16px;
  flex: 1; /* ÂÜÖÂÆπÂå∫Âç†Êª°Ââ©‰ΩôÁ©∫Èó?*/
  overflow: hidden; /* ‰∏∫ÊªöÂä®ÂÆπÂô®ÂáÜÂ§?*/
}

/* Áã¨Á´ãÊªöÂä®Âå∫Âüü */
.scroll-y-independent {
  max-height: calc(100vh - 300px); /* ËÆæÁΩÆÊúÄÂ§ßÈ´òÂ∫¶ÔºåÊ†πÊçÆÈúÄË¶ÅË∞ÉÊï?*/
  overflow-y: auto;
  overflow-x: hidden;
  /* ÁæéÂåñÊªöÂä®Êù?*/
  scrollbar-width: thin;
  scrollbar-color: #c1c1c1 #f1f1f1;
}

.scroll-y-independent::-webkit-scrollbar {
  width: 6px;
}

.scroll-y-independent::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.scroll-y-independent::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

.scroll-y-independent::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}
.sub-title { margin: 6px 0 8px; font-weight: 600; }
.time-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.qty-row { display: flex; gap: 8px; align-items: center; }
</style>


